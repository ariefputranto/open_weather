{% extends "layout.html.twig" %}

{% block title %}Home{% endblock %}

{% block stylesheets %}
<style type="text/css">
	.m-t-10{
		margin-top: 10px;
	}
</style>
{% endblock %}

{% block content %}
	<br>
	<center><h2>Weather Nearby</h2></center>
	<br>
	<form action="{{ url('default_map') }}" method="post">
		<div class="row">
			<div class="col-lg-8 offset-lg-2">
				<div class="card card-body bg-light">
					<div class="form-group row">
						<div class="col-lg-8">
							<label for="location">Select Location</label>
						    <input type="text" class="form-control" name="location" id="location" aria-describedby="locationHelp" placeholder="Enter Location" required="required">
						    <small id="locationHelp" class="form-text text-muted">Please fill location first before search</small>
						</div>
						<div class="col-lg-4">
							<label for="radius">Set Radius Distance</label>
						    <input type="text" class="form-control" name="radius" id="radius" aria-describedby="locationHelp" placeholder="1" required="required">
						</div>
						<div class="col-lg-12 m-t-10">
						  <button type="submit" class="btn btn-primary">Search</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
{% endblock %}

{% block javascripts %}
<script>
	$(document).ready(function() {
		$('body').on('change', '#location', function(){
			var value = $(this).val();
			if (value.length > 3) {
				$.ajax({
					url: '{{ url('default_searchCity') }}'+'?l='+value, 
					success:function(data){
						console.log(data);
						data = JSON.parse(data);
						console.log(data);
					}
				});
			}
		});
	});
</script>
{% endblock %}