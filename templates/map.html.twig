{% extends "layout.html.twig" %}

{% block title %}Map{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="datatables/datatables.min.css"/>
<style type="text/css">
	#map {
        height: 400px;
      }
</style>
{% endblock %}

{% block content %}
	<br>
	<center><h2>Search City Nearby {{ current_loc['placeName'] }}</h2></center>
	<br>
	<div class="row">
		<div class="col-lg-10 offset-lg-1">
			<div id="map"></div>
		</div>
	</div>
	<br>
	<div class="row">
		<div class="col-lg-10 offset-lg-1">
			<div class="card card-body bg-light">
				<table class="table table-striped table-bordered" id="table_city">
					<thead>
						<tr>
							<th>#</th>
							<th>Post Code</th>
							<th>Place Name</th>
							<th>State Name</th>
							<th>State Code</th>
						</tr>
					</thead>
					<tbody>
						{% for item in marker %}
						<tr>
							<td>{{ loop.index }}</td>
							<td>{{ item.postcode }}</td>
							<td>{{ item.placeName }}</td>
							<td>{{ item.stateName }}</td>
							<td>{{ item.stateCode }}</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>
{% endblock %}

{% block javascripts %}
<script type="text/javascript" src="datatables/datatables.min.js"></script>
<script>
	$(document).ready(function() {
		$('#table_city').DataTable();
	});
</script>
<script>
  var map;
  var lat = {{ current_loc['latitude'] }};
  var long = {{ current_loc['longitude'] }};
  function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: lat, lng: long},
      zoom: 8
    });
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCo-tBCK0QMFP5pr7wmLd8ux9PDNmze2P0&callback=initMap"
async defer></script>

{% endblock %}